import "utils/index.ostw";

rule: "[HUD] Teleports"
{
    CreateEffect(AllPlayers(Team.All), Effect.Ring, Color.Green, SecondPointToFirstPointLoc, 2, EffectRev.VisibleToPositionAndRadius);
	CreateInWorldText(AllPlayers(Team.All), "Hunting Grounds [PvE]", SecondPointToFirstPointLoc, 1.5, Clipping.ClipAgainstSurfaces, InworldTextRev.VisibleToPositionAndString, Color.Green, Spectators.DefaultVisibility);
	
    CreateEffect(AllPlayers(Team.All), Effect.Ring, Color.Blue, FirstPointToSecondPointLoc, 2, EffectRev.VisibleToPositionAndRadius);
	CreateInWorldText(AllPlayers(Team.All), "City", FirstPointToSecondPointLoc, 1.5, Clipping.ClipAgainstSurfaces, InworldTextRev.VisibleToPositionAndString, Color.Blue, Spectators.DefaultVisibility);
	
    CreateEffect(AllPlayers(Team.All), Effect.Ring, Color.Orange, SecondPointToThirdPointLoc, 2, EffectRev.VisibleToPositionAndRadius);
	CreateInWorldText(AllPlayers(Team.All), "Deadly Castle [PvPvE]", SecondPointToThirdPointLoc, 1.5, Clipping.ClipAgainstSurfaces, InworldTextRev.VisibleToPositionAndString, Color.Orange, Spectators.DefaultVisibility);
	
    CreateEffect(AllPlayers(Team.All), Effect.Ring, Color.Blue, ThirdPointToSecondPointLoc, 2, EffectRev.VisibleToPositionAndRadius);
	CreateInWorldText(AllPlayers(Team.All), "City", ThirdPointToSecondPointLoc, 1.5, Clipping.ClipAgainstSurfaces, InworldTextRev.VisibleToPositionAndString, Color.Blue, Spectators.DefaultVisibility);
}

rule: "[Teleport] Second Point to First Point"
Event.OngoingPlayer
if (IsButtonHeld(Player, Button.Interact))
if (DistanceBetween(Player, SecondPointToFirstPointLoc) <= 2)
{
    Teleport(Player, root.FirstPointSpawnLoc);
    CurrentZone = 1;
    PeaceMode = true;
    ClearStatus(Player, Status.PhasedOut);
}

rule: "[Teleport] First Point to Second Point"
Event.OngoingPlayer
if (IsButtonHeld(Player, Button.Interact))
if (DistanceBetween(Player, FirstPointToSecondPointLoc) <= 2)
{
    Teleport(Player, root.SecondPointFromFirstPointSpawnLoc);
    CurrentZone = 2;
    PeaceMode = true;
    SetStatus(Player, null, Status.PhasedOut, 9999);
}

rule: "[Teleport] Second Point to Third Point"
Event.OngoingPlayer
if (IsButtonHeld(Player, Button.Interact))
if (DistanceBetween(Player, SecondPointToThirdPointLoc) <= 2)
{
    Teleport(Player, root.ThirdPointSpawnLoc);
    CurrentZone = 3;
    PeaceMode = false;
    ClearStatus(Player, Status.PhasedOut);
}

rule: "[Teleport] Third Point to Second Point"
Event.OngoingPlayer
if (IsButtonHeld(Player, Button.Interact))
if (DistanceBetween(Player, ThirdPointToSecondPointLoc) <= 2)
{
    Teleport(Player, root.SecondPointFromThirdPointSpawnLoc);
    CurrentZone = 2;
    PeaceMode = true;
    SetStatus(Player, null, Status.PhasedOut, 9999);
}